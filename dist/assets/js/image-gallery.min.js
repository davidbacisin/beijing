!function(e){function t(e,t){var n=e.classList;return n&&n.contains(t)}function n(e,t){e.classList.add(t)}function r(e,t){e.classList.remove(t)}function i(e,n){for(var r=e.parentNode;r&&!t(r,n);)r=r.parentNode;return r}function a(e,n){for(var r=e.previousSibling;r&&!t(r,n);)r=r.previousSibling;return r}function c(e){for(var t;t=e.lastChild;)e.removeChild(t)}function o(t,n){return n=n||e,n.getElementsByClassName(t)}function l(t,n){return n=n||e,n.getElementsByTagName(t)}function u(t){return e.getElementById(t)}function g(t){return e.createElement(t)}function s(){var t=window.devicePixelRatio||1,n=t*(e.documentElement.clientWidth-20);return n<481?"480":n<601||1==t?"600":"1200"}function f(e){return e.replace(/(-t)?\.jpg$/,"-"+s()+".jpg")}function p(e){var t=new Image;return t.src=e,t}function v(e){setTimeout(function(){try{var c=i(e,"gallery").id,g=u(c+"-fig"),s=l("img",g)[0];s.src=f(l("img",e)[0].src);var p=o(d,g)[0],v=t(e,"p")?n:r;v(p,"p");var m=l("a",g)[0];m.setAttribute("href",s.src);var h=a(e,"caption"),b=l("figcaption",g)[0];b.innerHTML=h.innerHTML}catch(e){}},0)}var d="image-container",m='<div class="image-container"></div><nav><a title="Previous">◀</a> <span class="counter"><span class="current">1</span> of {count}</span> <a title="Next">▶</a></nav><figcaption>{caption}</figcaption><a class="image-link" href="{href}" target="_blank"></a>';e.body.addEventListener("click",function(e){var n=e.target,r=n.parentNode;t(r,"image-link")?v(r):t(n,"image-link")&&v(n)});for(var h=o("gallery"),b=0;b<h.length;b++){var N=h[b],k=g("figure");k.className="image-fig",k.id=N.id+"-fig";var L=o("caption",N)[0],y=o("image-link",N),A=y[0],C=m;C=C.replace("{href}",A.getAttribute("href")),C=C.replace("{count}",y.length),L.parentNode===A.parentNode&&(C=C.replace("{caption}",L.innerHTML)),k.innerHTML=C,N.parentNode.insertBefore(k,N)}for(var E=o("image-fig"),b=0;b<E.length;b++){var T=E[b],j=o("image-link",T)[0],B=j.getAttribute("href"),H=p(f(B));j.className="",j.setAttribute("href",B),c(j),j.appendChild(H);var M=o(d,T)[0];M.appendChild(j)}for(var y=o("image-link"),b=0;b<y.length;b++){var w=y[b],H=p(w.getAttribute("href").replace(".jpg","-t.jpg"));c(w),w.appendChild(H),w.removeAttribute("href"),w.removeAttribute("target")}}(document);