!function(e){function t(e,t){for(var n=e.parentNode;n&&!n.classList.contains(t);)n=n.parentNode;return n}function n(e,t){for(var n=e.previousSibling;n&&(!n.classList||!n.classList.contains(t));)n=n.previousSibling;return n}function a(e){for(var t;t=e.lastChild;)e.removeChild(t)}function i(e){var t=new Image;return t.src=e,t}function r(e){setTimeout(function(){try{var a=t(e,"gallery").id,i=document.getElementById(a+"-fig"),r=i.getElementsByTagName("img")[0];r.src=e.getElementsByTagName("img")[0].src;var l=n(e,"caption"),s=i.getElementsByTagName("figcaption")[0];s.innerHTML=l.innerHTML}catch(e){console.log("An exception occured while setting the gallery image:"),console.log(e)}},0)}e.body.addEventListener("click",function(e){var t=e.target;"image-link"==t.parentNode.className&&(t=t.parentNode),"image-link"==t.className&&r(t)});for(var l=e.getElementsByClassName("gallery"),s=0;s<l.length;s++){var o=l[s],m=document.createElement("figure");m.className="image-fig",m.id=o.id+"-fig";var c=o.getElementsByClassName("caption")[0],g=o.getElementsByClassName("image-link")[0],d=document.createElement("div"),p=document.createElement("figcaption"),u=document.createElement("button"),f=g.cloneNode(!0),N=f.getAttribute("href");if(f.setAttribute("href",N.replace(/-110\./,"-1200.")),d.className="image-container",m.appendChild(d),u.innerHTML="Next",m.appendChild(u),c.parentNode===g.parentNode){var p=document.createElement("figcaption");p.innerHTML=c.innerHTML,m.appendChild(p)}m.appendChild(f),o.parentNode.insertBefore(m,o)}for(var v=e.getElementsByClassName("image-fig"),s=0;s<v.length;s++){var h=v[s],f=h.getElementsByClassName("image-link")[0],N=f.getAttribute("href"),E=i(N);f.className="",f.setAttribute("href",N.replace(/-[0-9]+\./,"-1200.")),a(f),f.appendChild(E);var d=h.getElementsByClassName("image-container")[0];d.appendChild(f)}for(var y=e.getElementsByClassName("image-link"),s=0;s<y.length;s++){var C=y[s],E=i(C.getAttribute("href"));a(C),C.appendChild(E),C.removeAttribute("href"),C.removeAttribute("target")}}(document);